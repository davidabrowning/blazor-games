@page "/roygbiv"
@using Models.Roygbiv

<PageTitle>ROYGBIV</PageTitle>

<h1>ROYGBIV</h1>

@if (GameInProgress)
{
	<button class="btn btn-secondary mb-4 disabled">Game in progress</button>
}
else
{
	<button class="btn btn-primary mb-4" @onclick="DealCards">Deal cards</button>
}


<div class="row">
	@if (DrawPileTopCard == null)
	{
		<div class="card">
			-
		</div>
	}
	else if (!DrawPileIsRevealed)
	{
		<div class="card"
			 style="background-color:lightgray;"
			 @onclick="RevealDrawPile">
			???
		</div>
	}
	else
	{
		<div class="card card-selected"
			 style="background-color:@DrawPileTopCard.Color">
			@DrawPileTopCard.Value
		</div>
	}

	@if (DiscardPileTopCard != null)
	{
		<div class="card @(DiscardPileIsSelected ? "card-selected" : "")"
			 style="background-color:@DiscardPileTopCard.Color"
			 @onclick="SelectDiscardPile">
			@DiscardPileTopCard.Value
		</div>
	}
	else
	{
		<div class="card">
			-
		</div>
	}
</div>

@foreach (Player player in Players)
{
	<h2>@player.Name @(player == ActivePlayer ? "(active)" : "")</h2>
	<div class="row">
		@foreach (Card card in player.Hand.Cards)
		{
			<div class="card"
				 style="background-color:@card.Color"
				 @onclick="() => HandleHandCardClick(player, card)">
				@card.Value
			</div>
		}
	</div>
}
