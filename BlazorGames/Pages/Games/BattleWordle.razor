@page "/battle-wordle"
@using Models.BattleWordle
@using BlazorGames.Components.BattleWordle

<PageTitle>Stockholm Games: Battle Wordle</PageTitle>

<link rel="stylesheet" href="css/battle-wordle.css" />
<link rel="stylesheet" href="css/instructions.css" />

@if (ShowInstructions)
{
	<InstructionsView OnClickEventCallback="ToggleInstructions" />
}
else
{
	<GameMenuView CurrentGamePhase="@CurrentGamePhase" RestartEventCallback="EndGame" InstructionToggleEventCallback="ToggleInstructions" />

	switch (CurrentGamePhase)
	{
		case GamePhase.WordSelection:
			<WordSelectionView AnswerWord="@AnswerWord" />
			<KeyboardView GuessResults="@GuessResults" KeyClickEventCallback="OnKeyboardLetterClicked" ClearEventCallback="HandleClearClick" SubmitEventCallback="HandleSubmitClick" />
			break;

		case GamePhase.Guessing:
			<WordGuessingView AnswerWord="@AnswerWord" GuessWord="@GuessWord" MaxGuesses="@MaxGuesses" GuessResults="@GuessResults" />
			<KeyboardView GuessResults="@GuessResults" KeyClickEventCallback="OnKeyboardLetterClicked" ClearEventCallback="HandleClearClick" SubmitEventCallback="HandleSubmitClick" />
			break;

		case GamePhase.GameOver:
			<WordGuessingView AnswerWord="@AnswerWord" GuessWord="@GuessWord" MaxGuesses="@MaxGuesses" GuessResults="@GuessResults" />
			@if (!GuessResults.Last().IsCorrect())
			{
				<AnswerRevealView AnswerWord="@AnswerWord" />
			}
			<PlayAgainButtonView PlayAgainEventCallback="EndGame" />
			break;
	}
}